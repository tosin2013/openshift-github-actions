---
# defaults file for vault_helm_deploy
vault_helm_chart_repo: "https://helm.releases.hashicorp.com"
vault_helm_chart_name: "hashicorp/vault"
vault_helm_chart_version: "0.30.0" # Specify a version or leave empty for latest compatible
vault_helm_release_name: "vault"

# Variables for templating vault-values.yaml.j2
vault_helm_image_repository: "hashicorp/vault"
vault_helm_image_tag: "latest" # Or a specific version like "1.15.0"
vault_helm_image_pull_policy: "IfNotPresent"

vault_ui_enabled: true
vault_ha_enabled: true # Set to false for standalone
vault_replicas: 3

vault_route_enabled: true
vault_route_host: "" # Auto-generated by OpenShift if empty, or specify e.g., vault.apps.mycluster.com

vault_pvc_size: "10Gi"
vault_audit_storage_enabled: false
vault_audit_pvc_size: "10Gi"
vault_storage_class: "" # Set if a specific storage class is required, otherwise uses default

# Auto-unseal settings (defaults to manual unseal)
vault_auto_unseal_enabled: false
vault_auto_unseal_cloud_provider: "none" # aws, azure, gcp

# AWS KMS auto-unseal
vault_aws_kms_key_id: ""
vault_aws_region: ""

# Azure Key Vault auto-unseal
vault_azure_key_vault_name: ""
vault_azure_key_name: ""
vault_azure_tenant_id: ""
vault_azure_client_id: ""
vault_azure_client_secret: "" # This should be handled as a secret

# GCP KMS auto-unseal
vault_gcp_kms_project: ""
vault_gcp_kms_location: ""
vault_gcp_kms_key_ring: ""
vault_gcp_kms_crypto_key: ""
vault_gcp_sa_credentials_secret_name: "" # Name of the K8s secret holding GCP SA JSON key
vault_gcp_sa_credentials_path: "/vault/userconfig/gcp-kms/gcp-credentials.json" # Path inside Vault pod where secret is mounted

# Agent Injector and CSI Provider
vault_injector_enabled: false
vault_csi_enabled: false

# Path for the generated values file
vault_helm_generated_values_file_path: "/tmp/vault-helm-values-{{ lookup('pipe', 'date +%s%N') }}.yaml"

vault_helm_create_namespace: false # Namespace should be managed by openshift_prereqs role
vault_helm_atomic: true # If true, upgrade process rolls back changes made in case of failed upgrade.
vault_helm_wait: true # If true, will wait until all resources are in a ready state.
vault_helm_timeout: "10m" # Time to wait for any individual Kubernetes operation.
# These often mirror or use variables from openshift_prereqs or global vars.
# For example, vault_namespace, vault_ha_enabled, vault_replicas, vault_tls_secret_name etc.
# We will define more specific ones as we build the values template.

# Default image settings (can be overridden)
vault_image_repository: "hashicorp/vault"
vault_image_tag: "1.15.6" # Specify a recent, stable Vault version

# Default global settings for Helm chart
vault_helm_global_openshift: true
vault_helm_global_tlsDisable: false # TLS is managed by openshift_prereqs

# Server specific settings (will be detailed in the values template)
# vault_server_standalone_enabled: true (or false if HA)
# vault_server_ha_enabled: false (or true if HA)
# vault_server_route_enabled: true
# vault_server_route_termination: "passthrough"

# Default to standalone for simplicity, can be overridden for HA
vault_deployment_mode: "standalone" # "standalone" or "ha"
